(this["webpackJsonpthe-shoppies"]=this["webpackJsonpthe-shoppies"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),s=n.n(i),r=n(22),c=n.n(r),o=(n(32),n(11)),u=n(23),l=n(6),d=(n(33),n(4)),h=n(5),p=n(3),m=n(8),j=n(7),b=n(24),f=n.n(b),v=(n(36),function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleInput=function(e){a.props.setLoadingState(!0),a.searchByTitle({title:e.target.value.trim()})},a.handleInput=a.handleInput.bind(Object(p.a)(a)),a.searchByTitle=a.searchByTitle.bind(Object(p.a)(a)),a.searchByTitle=f.a.debounce(a.searchByTitle,500),a}return Object(h.a)(n,[{key:"searchByTitle",value:function(e){this.props.searchByTitle(e)}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"search-bar",children:[Object(a.jsx)("p",{children:"Movie Title"}),Object(a.jsx)("input",{type:"text",id:"search-field",placeholder:"Search...",autoComplete:"off",onChange:this.handleInput})]})}}]),n}(i.Component)),O=(n(37),n(38),function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),s=n[0],r=n[1];Object(i.useEffect)((function(){r(e.isNominated)}),[e.isNominated]);return Object(a.jsxs)("div",{className:"result-list-item",children:[Object(a.jsxs)("div",{className:"title",children:[e.title," (",e.year,")"]}),Object(a.jsx)("button",{disabled:s,onClick:function(){e.handleNomination({title:e.title,year:e.year,id:e.id})},children:"Nominate"})]})}),g=(n(39),function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={currPage:1},a.updatePageNum=a.updatePageNum.bind(Object(p.a)(a)),a.prevPage=a.prevPage.bind(Object(p.a)(a)),a.nextPage=a.nextPage.bind(Object(p.a)(a)),a}return Object(h.a)(n,[{key:"updatePageNum",value:function(e){var t=parseInt(e.target.value);this.setState({currPage:t}),this.props.updatePageNum(t)}},{key:"prevPage",value:function(){var e=this;this.setState({currPage:this.state.currPage-1},(function(){e.props.updatePageNum(e.state.currPage)}))}},{key:"nextPage",value:function(){var e=this;this.setState({currPage:this.state.currPage+1},(function(){e.props.updatePageNum(e.state.currPage)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"page-bar",children:[Object(a.jsx)("button",{className:"page-button",disabled:1===this.state.currPage,onClick:this.prevPage,children:"Prev"}),Object(a.jsxs)("div",{className:"page-num",children:[Object(a.jsx)("select",{className:"page-num-selection",onChange:this.updatePageNum,value:this.state.currPage,children:Array.from(Array(this.props.numOfPages),(function(e,t){return Object(a.jsx)("option",{value:t+1,children:t+1},t+1)}))}),Object(a.jsxs)("span",{children:[" / ",this.props.numOfPages]})]}),Object(a.jsx)("button",{className:"page-button",disabled:this.state.currPage===this.props.numOfPages,onClick:this.nextPage,children:"Next"})]})}}]),n}(i.Component)),N=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={movies:a.props.movieData||null,isLoading:a.props.isLoading,didFinishNominate:a.props.didFinishNominate},a.updatePageNum=a.updatePageNum.bind(Object(p.a)(a)),a.handleNomination=a.handleNomination.bind(Object(p.a)(a)),a}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e){e.movieData!==this.props.movieData&&this.setState({movies:this.props.movieData}),e.isLoading!==this.props.isLoading&&this.setState({isLoading:this.props.isLoading}),e.didFinishNominate!==this.props.didFinishNominate&&this.setState({didFinishNominate:this.props.didFinishNominate})}},{key:"updatePageNum",value:function(e){this.props.updatePageNum(e)}},{key:"handleNomination",value:function(e){this.props.handleNomination(e)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"result-list",children:[Object(a.jsx)("p",{children:"Search results"}),this.state.isLoading?Object(a.jsx)("div",{className:"placeholder",children:"Loading"}):this.state.movies?Array.isArray(this.state.movies)?Object(a.jsxs)("div",{className:"list-body",children:[this.state.movies.map((function(t,n){return Object(a.jsx)(O,{title:t.title,year:t.year,id:t.id,isNominated:!!e.state.didFinishNominate||t.isNominated,handleNomination:e.handleNomination},n)})),Object(a.jsx)(g,{updatePageNum:this.updatePageNum,numOfPages:this.props.numOfPages})]}):Object(a.jsx)("div",{className:"placeholder",children:this.state.movies}):Object(a.jsx)("div",{className:"placeholder",children:"Search something"})]})}}]),n}(i.Component),y=n(13),x=n.n(y),P=n(25),S="812bf1e0",k="http://www.omdbapi.com/",T=n(26),B=n.n(T).a.create({baseURL:k,responseType:"json",timeout:5e3}),C=function(){function e(){Object(d.a)(this,e),this.params={apiKey:S},this.searchByTitle=this.searchByTitle.bind(this)}return Object(h.a)(e,[{key:"searchByTitle",value:function(){var e=Object(P.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={apiKey:this.params.apiKey,s:t.title,type:"movie"},t.page&&(n.page=t.page),e.next=4,B.get("/",{params:n});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=(n(58),n(59),function(e){return Object(a.jsxs)("div",{className:"result-list-item",children:[Object(a.jsxs)("div",{className:"title",children:[e.title," (",e.year,")"]}),Object(a.jsx)("button",{onClick:function(){e.onRemove(e.id)},children:"Remove"})]})}),F=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={nominations:a.props.nominations||[]},a}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e){e.nominations.length!==this.props.nominations.length&&this.setState({nominations:this.props.nominations})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"nominations",children:[Object(a.jsx)("p",{children:"Nominations"}),this.state.nominations.map((function(t,n){return Object(a.jsx)(L,{title:t.title,year:t.year,id:t.id,onRemove:e.props.onRemove},n)}))]})}}]),n}(i.Component);var I=function(){var e=new C,t=Object(i.useState)(!1),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(i.useState)(!1),d=Object(l.a)(c,2),h=d[0],p=d[1],m=Object(i.useState)(null),j=Object(l.a)(m,2),b=j[0],f=j[1],O=Object(i.useState)(null),g=Object(l.a)(O,2),y=g[0],x=g[1],P=Object(i.useState)(""),S=Object(l.a)(P,2),k=S[0],T=S[1],B=Object(i.useState)((function(){var e=JSON.parse(localStorage.getItem("nominations"))||[];return e.length>=5&&r(!0),e})),L=Object(l.a)(B,2),I=L[0],D=L[1],w=function(e){return I.filter((function(t){return t.id===e})).length>0};Object(i.useEffect)((function(){I.length>=5?r(!0):r(!1),E(I)}),[I]);var R=function(t){t?(T(t.title),e.searchByTitle(t).then((function(e){if(e.data){var t=e.data;"True"===t.Response?(f(function(e){var t=[];if(e){var n,a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=w(i.imdbID);t.push({title:i.Title,year:i.Year,id:i.imdbID,isNominated:s})}}catch(r){a.e(r)}finally{a.f()}}return t}(t.Search)),function(e){if(e&&!isNaN(e)){var t=parseInt(e),n=Math.ceil(t/10);x(n)}}(t.totalResults)):(console.log(t.Error),f(t.Error))}})).catch((function(e){e.response&&A(e.response.data)})).finally((function(){p(!1)}))):(f(null),p(!1))},A=function(e){console.log(e)},E=function(e){localStorage.setItem("nominations",JSON.stringify(e))};return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("h1",{children:"The Shoppie"}),Object(a.jsx)(v,{searchByTitle:R,setLoadingState:function(e){p(e)}}),Object(a.jsxs)("div",{className:"app-body",children:[Object(a.jsx)(N,{movieData:b,isLoading:h,numOfPages:y,updatePageNum:function(e){R({title:k,page:e})},handleNomination:function(e){if(I.length<5){D((function(t){return[].concat(Object(o.a)(t),[e])}));var t=Object(o.a)(b);for(var n in t)t[n].id===e.id&&(t[n].isNominated=!0);f(t)}},didFinishNominate:s}),Object(a.jsx)(F,{nominations:I,onRemove:function(e){var t=I.filter((function(t){return t.id!==e}));if(D(t),Array.isArray(b)){var n=Object(o.a)(b);for(var a in n)n[a].id===e&&(n[a].isNominated=!1);f(n)}}})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};c.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(I,{})}),document.getElementById("root")),D()}},[[60,1,2]]]);
//# sourceMappingURL=main.5fbed2f8.chunk.js.map